{"version":3,"sources":["authController.js"],"names":["asyncHandler","require","AppError","jwt","exports","signup","req","res","user","token","regeneratorRuntime","async","_context","prev","next","awrap","User","create","name","body","email","password","createToken","passwordConfirm","sent","_id","console","log","status","json","data","stop","findOne","correctPassword"],"mappings":"aAAA,IAAMA,aAAeC,QAAQ,yBACvBC,SAAWD,QAAQ,qBADnBD,KAAAA,QAAeC,kBAGfE,IAAMF,QAAQ,gBAFdC,YAAWD,QAAQ,wBAIzBG,QAAQC,OAASL,aAAa,SAAOM,EAAKC,GAAZ,IAAAC,EAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OAAAF,EAAAE,KAAA,EAAAJ,mBAAAK,MAHTC,KAAAC,OAAD,CAKhBC,KAAMZ,EAAIa,KAAKD,KAJbf,MAAMF,EAAAA,KAAQmB,MAMhBC,SAAUf,EAAIa,KAAKE,SALjBC,gBAAcrB,EAAOkB,KAACI,mBACE,KAAA,EAHpBf,EAGoBI,EAAAY,KAA9BpB,QAAQC,IAAR,SAA8BI,EAAAa,YAAAd,EAAAiB,KAAAC,QAAAC,IAAA,SAAAlB,GAAAF,EAAAqB,OAAA,KAAAC,KAAA,CAAAD,OAAA,UAAAnB,MAAAA,EAAAqB,KAAAtB,IAAA,KAAA,EAAA,IAAA,MAAA,OAAAI,EAAAmB,YAG1BX,QAAAA,MAAAA,aAAgBA,SAFed,EAAAC,EAAAO,GAEfM,IAAAA,EAAAA,EAAAA,EAAAA,EAAAA,EAAAA,OAAAA,mBAAAA,MAAAA,SAAAA,GAAAA,OAAAA,OAAAA,EAAAA,KAAAA,EAAAA,MAAAA,KAAAA,EAAAA,OAAAA,EACGC,EAAAA,KAAnBA,EADgBD,EAChBC,MAAAA,EADgBD,EAChBC,SACAE,GAAAA,GAJ+BT,EADL,IAAAZ,SAAA,uCAAA,MAGVkB,EAAAA,KAAAA,EAAAA,mBAAAA,MAHUJ,KAAAgB,QAAA,CAAAZ,MAAAA,KAGVA,KAAAA,EAAAA,GAHUZ,EAGVY,EAAAA,KAAAA,EAAAA,IAFVZ,EAEUY,EAAAA,GAAAA,CAAAA,EAAAA,KAAAA,GAAAA,MAAAA,OAAAA,EAAAA,KAAAA,EAAAA,mBAAAA,MAHUZ,EAAAyB,gBAAAZ,EAAAb,EAAAa,WAGVD,KAAAA,EAAAA,EAAAA,IAAAA,EAAAA,KAAAA,KAAAA,GAAAA,IAAAA,EAAAA,GAAAA,CAAAA,EAAAA,KAAAA,GAAAA,MAIhBM,EAAAA,IAAQC,SAAI,+BAAZ,MAJgBP,KAAAA,GAMhBM,EAAQC,YAARnB,EAAqBC,KACrBF,EAAAA,OAAIqB,KAAJC,KAAA,CACID,OAAAA,UACAnB,MAAAA,IATYW,KAAAA,GAAAA,IAAAA,MAAAA,OAAAA,EAAAA","file":"authController.min.js","sourcesContent":["const asyncHandler = require('express-async-handler');\r\nconst AppError = require('../utils/AppError');\r\nconst User = require('../models/user');\r\nconst jwt = require('jsonwebtoken');\r\nconst createToken = require('../utils/createToken');\r\nexports.signup = asyncHandler(async (req, res, next) => {\r\n    const user = await User.create({\r\n    name: req.body.name,\r\n    email: req.body.email,\r\n    password: req.body.password,\r\n    passwordConfirm: req.body.passwordConfirm,\r\n    });\r\n    console.log(\"hello\")\r\n    const token = createToken(user._id);\r\n    console.log(\"token \",token)\r\n    res.status(201).json({\r\n        status: 'success',\r\n        token,\r\n        data: user,\r\n  });\r\n})\r\nexports.login = asyncHandler(async (req, res, next) => {\r\n    const { email, password } = req.body;\r\n    if (!email || !password) {\r\n        next(new AppError(\" you should enter email and password\", 400));\r\n    }\r\n    const user = await User.findOne({ email });\r\n    if (!user || !(await user.correctPassword(password,user.password))) {\r\n         next(new AppError(\" Incorrect email or password\", 401));\r\n    }\r\n    const token = createToken(user._id);\r\n    res.status(200).json({\r\n        status: \"success\",\r\n        token\r\n    })\r\n\r\n})"]}