"use strict";var asyncHandler=require("express-async-handler"),AppError=require("../utils/AppError"),User=require("../models/user"),jwt=require("jsonwebtoken"),createToken=require("../utils/createToken");exports.signup=asyncHandler(function(r,s){var n,t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(User.create({name:r.body.name,email:r.body.email,password:r.body.password,passwordConfirm:r.body.passwordConfirm}));case 2:n=e.sent,console.log("hello"),t=createToken(n._id),console.log("token ",t),s.status(201).json({status:"success",token:t,data:n});case 7:case"end":return e.stop()}})}),exports.login=asyncHandler(function(r,s,n){var t,a,o,c,i;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.body,a=t.email,o=t.password,a&&o||n(new AppError(" you should enter email and password",400)),e.next=4,regeneratorRuntime.awrap(User.findOne({email:a}));case 4:if(c=e.sent,e.t0=!c,e.t0){e.next=10;break}return e.next=9,regeneratorRuntime.awrap(c.correctPassword(o,c.password));case 9:e.t0=!e.sent;case 10:if(!e.t0){e.next=12;break}n(new AppError(" Incorrect email or password",401));case 12:i=createToken(c._id),s.status(200).json({status:"success",token:i});case 14:case"end":return e.stop()}})});
//# sourceMappingURL=authController.min.js.map
