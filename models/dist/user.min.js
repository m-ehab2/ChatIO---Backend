"use strict";var validator=require("validator"),mongoose=require("mongoose"),bcrypt=require("bcryptjs"),UserSchema=new mongoose.Schema({name:{type:String,required:[!0,"please enter your name"]},email:{type:String,required:[!0,"please enter your email"],validate:[validator.isEmail,"Please Enter a Valid Email"]},password:{type:String,required:[!0,"please enter Password"],minlength:[8,"please enter more than or equal 8 chars"]},passwordConfirm:{type:String,required:[!0,"please confirm your password"],validate:{validator:function(e){return e==this.password},message:"the password not the same"}},passwordChangedAt:Date},{timestamps:!0});UserSchema.pre("save",function(r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isModified("password")){e.next=2;break}return e.abrupt("return",r());case 2:return e.next=4,regeneratorRuntime.awrap(bcrypt.hash(this.password,12));case 4:this.password=e.sent,this.passwordConfirm=void 0,r();case 7:case"end":return e.stop()}},null,this)}),UserSchema.methods.correctPassword=function(r,s){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(bcrypt.compare(r,s));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}})},UserSchema.methods.changedPasswordAfter=function(e){return!!this.passwordChangedAt&&e<parseInt(this.passwordChangedAt.getTime()/1e3,10)};var User=mongoose.model("User",UserSchema);module.exports=User;
//# sourceMappingURL=user.min.js.map
