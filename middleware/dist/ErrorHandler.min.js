"use strict";var AppError=require("../utils/AppError"),ErrorHandler=function(s,e,r){if(console.log("error ",s),s instanceof AppError)return console.log(s),console.log(AppError),r.status(s.statusCode).json({status:"fail",message:s.message});if("ValidationError"===s.name){console.log(s);var a=Object.values(s.errors).map(function(s){return s.message}).join(", ");return r.status(400).json({status:"fail",message:a})}if("MongoServerError"!==s.name||11e3!==s.code)return"JsonWebTokenError"===s.name?r.status(401).json({status:"fail",message:"Invalid token. Please log in again."}):"TokenExpiredError"===s.name?r.status(401).json({status:"fail",message:"Token is expired. Please log in again."}):404===s.status?r.status(404).json({status:"fail",message:"Cannot find ".concat(e.originalUrl," on this server.")}):r.status(500).json({status:"error",message:"Internal server error."});var o=Object.keys(s.keyValue)[0];return r.status(400).json({status:"fail",message:"The ".concat(o," is already taken.")})};module.exports=ErrorHandler;
//# sourceMappingURL=ErrorHandler.min.js.map
